// Code generated by Kitex v0.15.3. DO NOT EDIT.

package storageservice

import (
	"context"
	"errors"
	client "github.com/cloudwego/kitex/client"
	kitex "github.com/cloudwego/kitex/pkg/serviceinfo"
	storage "zpi/server/shared/kitex_gen/storage"
)

var errInvalidMessageType = errors.New("invalid message type for service method handler")

var serviceMethods = map[string]kitex.MethodInfo{
	"GetUploadUrl": kitex.NewMethodInfo(
		getUploadUrlHandler,
		newStorageServiceGetUploadUrlArgs,
		newStorageServiceGetUploadUrlResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"ConfirmUpload": kitex.NewMethodInfo(
		confirmUploadHandler,
		newStorageServiceConfirmUploadArgs,
		newStorageServiceConfirmUploadResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"GetDownloadUrl": kitex.NewMethodInfo(
		getDownloadUrlHandler,
		newStorageServiceGetDownloadUrlArgs,
		newStorageServiceGetDownloadUrlResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"DeleteFile": kitex.NewMethodInfo(
		deleteFileHandler,
		newStorageServiceDeleteFileArgs,
		newStorageServiceDeleteFileResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"GetFileInfo": kitex.NewMethodInfo(
		getFileInfoHandler,
		newStorageServiceGetFileInfoArgs,
		newStorageServiceGetFileInfoResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"BatchDeleteFiles": kitex.NewMethodInfo(
		batchDeleteFilesHandler,
		newStorageServiceBatchDeleteFilesArgs,
		newStorageServiceBatchDeleteFilesResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"GetUserFiles": kitex.NewMethodInfo(
		getUserFilesHandler,
		newStorageServiceGetUserFilesArgs,
		newStorageServiceGetUserFilesResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
}

var (
	storageServiceServiceInfo                = NewServiceInfo()
	storageServiceServiceInfoForClient       = NewServiceInfoForClient()
	storageServiceServiceInfoForStreamClient = NewServiceInfoForStreamClient()
)

// for server
func serviceInfo() *kitex.ServiceInfo {
	return storageServiceServiceInfo
}

// for stream client
func serviceInfoForStreamClient() *kitex.ServiceInfo {
	return storageServiceServiceInfoForStreamClient
}

// for client
func serviceInfoForClient() *kitex.ServiceInfo {
	return storageServiceServiceInfoForClient
}

// NewServiceInfo creates a new ServiceInfo containing all methods
func NewServiceInfo() *kitex.ServiceInfo {
	return newServiceInfo(false, true, true)
}

// NewServiceInfo creates a new ServiceInfo containing non-streaming methods
func NewServiceInfoForClient() *kitex.ServiceInfo {
	return newServiceInfo(false, false, true)
}
func NewServiceInfoForStreamClient() *kitex.ServiceInfo {
	return newServiceInfo(true, true, false)
}

func newServiceInfo(hasStreaming bool, keepStreamingMethods bool, keepNonStreamingMethods bool) *kitex.ServiceInfo {
	serviceName := "StorageService"
	handlerType := (*storage.StorageService)(nil)
	methods := map[string]kitex.MethodInfo{}
	for name, m := range serviceMethods {
		if m.IsStreaming() && !keepStreamingMethods {
			continue
		}
		if !m.IsStreaming() && !keepNonStreamingMethods {
			continue
		}
		methods[name] = m
	}
	extra := map[string]interface{}{
		"PackageName": "storage",
	}
	if hasStreaming {
		extra["streaming"] = hasStreaming
	}
	svcInfo := &kitex.ServiceInfo{
		ServiceName:     serviceName,
		HandlerType:     handlerType,
		Methods:         methods,
		PayloadCodec:    kitex.Thrift,
		KiteXGenVersion: "v0.15.3",
		Extra:           extra,
	}
	return svcInfo
}

func getUploadUrlHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*storage.StorageServiceGetUploadUrlArgs)
	realResult := result.(*storage.StorageServiceGetUploadUrlResult)
	success, err := handler.(storage.StorageService).GetUploadUrl(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newStorageServiceGetUploadUrlArgs() interface{} {
	return storage.NewStorageServiceGetUploadUrlArgs()
}

func newStorageServiceGetUploadUrlResult() interface{} {
	return storage.NewStorageServiceGetUploadUrlResult()
}

func confirmUploadHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*storage.StorageServiceConfirmUploadArgs)
	realResult := result.(*storage.StorageServiceConfirmUploadResult)
	success, err := handler.(storage.StorageService).ConfirmUpload(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newStorageServiceConfirmUploadArgs() interface{} {
	return storage.NewStorageServiceConfirmUploadArgs()
}

func newStorageServiceConfirmUploadResult() interface{} {
	return storage.NewStorageServiceConfirmUploadResult()
}

func getDownloadUrlHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*storage.StorageServiceGetDownloadUrlArgs)
	realResult := result.(*storage.StorageServiceGetDownloadUrlResult)
	success, err := handler.(storage.StorageService).GetDownloadUrl(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newStorageServiceGetDownloadUrlArgs() interface{} {
	return storage.NewStorageServiceGetDownloadUrlArgs()
}

func newStorageServiceGetDownloadUrlResult() interface{} {
	return storage.NewStorageServiceGetDownloadUrlResult()
}

func deleteFileHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*storage.StorageServiceDeleteFileArgs)
	realResult := result.(*storage.StorageServiceDeleteFileResult)
	success, err := handler.(storage.StorageService).DeleteFile(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newStorageServiceDeleteFileArgs() interface{} {
	return storage.NewStorageServiceDeleteFileArgs()
}

func newStorageServiceDeleteFileResult() interface{} {
	return storage.NewStorageServiceDeleteFileResult()
}

func getFileInfoHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*storage.StorageServiceGetFileInfoArgs)
	realResult := result.(*storage.StorageServiceGetFileInfoResult)
	success, err := handler.(storage.StorageService).GetFileInfo(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newStorageServiceGetFileInfoArgs() interface{} {
	return storage.NewStorageServiceGetFileInfoArgs()
}

func newStorageServiceGetFileInfoResult() interface{} {
	return storage.NewStorageServiceGetFileInfoResult()
}

func batchDeleteFilesHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*storage.StorageServiceBatchDeleteFilesArgs)
	realResult := result.(*storage.StorageServiceBatchDeleteFilesResult)
	success, err := handler.(storage.StorageService).BatchDeleteFiles(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newStorageServiceBatchDeleteFilesArgs() interface{} {
	return storage.NewStorageServiceBatchDeleteFilesArgs()
}

func newStorageServiceBatchDeleteFilesResult() interface{} {
	return storage.NewStorageServiceBatchDeleteFilesResult()
}

func getUserFilesHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*storage.StorageServiceGetUserFilesArgs)
	realResult := result.(*storage.StorageServiceGetUserFilesResult)
	success, err := handler.(storage.StorageService).GetUserFiles(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newStorageServiceGetUserFilesArgs() interface{} {
	return storage.NewStorageServiceGetUserFilesArgs()
}

func newStorageServiceGetUserFilesResult() interface{} {
	return storage.NewStorageServiceGetUserFilesResult()
}

type kClient struct {
	c client.Client
}

func newServiceClient(c client.Client) *kClient {
	return &kClient{
		c: c,
	}
}

func (p *kClient) GetUploadUrl(ctx context.Context, req *storage.GetUploadUrlReq) (r *storage.GetUploadUrlResp, err error) {
	var _args storage.StorageServiceGetUploadUrlArgs
	_args.Req = req
	var _result storage.StorageServiceGetUploadUrlResult
	if err = p.c.Call(ctx, "GetUploadUrl", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) ConfirmUpload(ctx context.Context, req *storage.ConfirmUploadReq) (r *storage.ConfirmUploadResp, err error) {
	var _args storage.StorageServiceConfirmUploadArgs
	_args.Req = req
	var _result storage.StorageServiceConfirmUploadResult
	if err = p.c.Call(ctx, "ConfirmUpload", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) GetDownloadUrl(ctx context.Context, req *storage.GetDownloadUrlReq) (r *storage.GetDownloadUrlResp, err error) {
	var _args storage.StorageServiceGetDownloadUrlArgs
	_args.Req = req
	var _result storage.StorageServiceGetDownloadUrlResult
	if err = p.c.Call(ctx, "GetDownloadUrl", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) DeleteFile(ctx context.Context, req *storage.DeleteFileReq) (r *storage.DeleteFileResp, err error) {
	var _args storage.StorageServiceDeleteFileArgs
	_args.Req = req
	var _result storage.StorageServiceDeleteFileResult
	if err = p.c.Call(ctx, "DeleteFile", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) GetFileInfo(ctx context.Context, req *storage.GetFileInfoReq) (r *storage.GetFileInfoResp, err error) {
	var _args storage.StorageServiceGetFileInfoArgs
	_args.Req = req
	var _result storage.StorageServiceGetFileInfoResult
	if err = p.c.Call(ctx, "GetFileInfo", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) BatchDeleteFiles(ctx context.Context, req *storage.BatchDeleteFilesReq) (r *storage.BatchDeleteFilesResp, err error) {
	var _args storage.StorageServiceBatchDeleteFilesArgs
	_args.Req = req
	var _result storage.StorageServiceBatchDeleteFilesResult
	if err = p.c.Call(ctx, "BatchDeleteFiles", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) GetUserFiles(ctx context.Context, req *storage.GetUserFilesReq) (r *storage.GetUserFilesResp, err error) {
	var _args storage.StorageServiceGetUserFilesArgs
	_args.Req = req
	var _result storage.StorageServiceGetUserFilesResult
	if err = p.c.Call(ctx, "GetUserFiles", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}
