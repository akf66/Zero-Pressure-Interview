# Zero-Pressure-Interview (ZPI) - AI面试官系统

## 一、项目概述

**项目名称：** Zero-Pressure-Interview（零压面试）

**项目定位：** 一个帮助求职者进行面试练习的AI智能面试平台，通过模拟真实面试场景，降低求职者的面试焦虑，提升面试能力。

**核心价值：**
- 随时随地进行面试练习，无时间压力
- AI智能评估，提供专业反馈
- 针对性训练，快速提升面试技能

## 二、微服务架构

### 2.1 服务划分

```
┌─────────────────────────────────────────────────────────────┐
│                      API Gateway (Hertz)                     │
│                    统一入口、路由、鉴权                        │
└─────────────────────────────────────────────────────────────┘
                              │
        ┌─────────────────────┼─────────────────────┐
        │                     │                     │
        ▼                     ▼                     ▼
┌───────────────┐    ┌───────────────┐    ┌───────────────┐
│  User 服务    │    │ Interview 服务│    │ Question 服务 │
│  用户管理     │    │  AI面试编排   │    │   题库管理    │
└───────────────┘    └───────────────┘
        │                     │                     │
        └─────────────────────┼─────────────────────┘
                              │
                              ▼
                    ┌───────────────┐
                    │ Storage 服务  │
                    │ 文件/数据存储 │
                    └───────────────┘
```

### 2.2 服务职责

| 服务 | 职责 | 技术选型 |
|------|------|----------|
| **API Gateway** | HTTP入口、路由转发、Paseto鉴权、限流 | Hertz |
| **User 服务** | 用户注册登录、信息管理、简历管理 | Kitex RPC |
| **Interview 服务** | AI对话编排、面试流程控制、评估生成 | Kitex RPC |
| **Question 服务** | 题库CRUD、题目分类、难度管理 | Kitex RPC |
| **Storage 服务** | 文件上传下载、简历存储、面试记录存储 | Kitex RPC |

## 三、功能模块

### 3.1 用户模块

#### 3.1.1 账户管理
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 用户注册 | 邮箱/手机号注册 | P0 |
| 用户登录 | 账号密码登录、第三方登录(GitHub/微信) | P0 |
| 个人信息 | 修改昵称、头像、联系方式 | P1 |
| 密码管理 | 修改密码、找回密码 | P1 |

#### 3.1.2 简历管理
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 上传简历 | 支持PDF/Word格式，自动解析 | P0 |
| 简历解析 | 提取教育背景、工作经历、技能标签 | P1 |
| 简历优化 | AI分析简历，提供优化建议 | P2 |
| 岗位匹配 | 根据简历推荐适合的岗位方向 | P2 |

### 3.2 面试模块

#### 3.2.1 专项面试
**定义：** 针对单一技术领域的深度训练

| 专项类型 | 示例 | 题目数量 |
|----------|------|----------|
| 编程语言 | Golang、Java、Python、C++ | 每类50+ |
| 数据库 | MySQL、Redis、MongoDB | 每类30+ |
| 中间件 | Kafka、RabbitMQ、Elasticsearch | 每类20+ |
| 框架 | Spring、Gin、Django | 每类30+ |
| 基础知识 | 操作系统、计算机网络、数据结构 | 每类40+ |

**面试流程：**
1. 选择专项类型和难度（初级/中级/高级）
2. AI根据选择生成5-10道题目
3. 逐题作答，AI实时追问
4. 完成后生成专项评估报告

#### 3.2.2 综合面试（模拟面试）
**定义：** 模拟真实企业面试的完整流程

| 面试轮次 | 考察重点 | 时长 |
|----------|----------|------|
| 一面（技术基础） | 编程基础、项目经验、基础算法 | 30分钟 |
| 二面（技术深度） | 系统设计、技术深度、问题解决 | 45分钟 |
| 三面（综合能力） | 架构能力、技术视野、学习能力 | 45分钟 |
| HR面 | 职业规划、团队协作、薪资期望 | 20分钟 |

**面试流程：**
1. 选择目标岗位（如：Golang后端工程师-3年经验）
2. 上传简历（可选，用于个性化问题）
3. 选择面试轮次或完整流程
4. AI扮演面试官进行对话
5. 完成后生成综合评估报告

### 3.3 题库模块

#### 3.3.1 题库浏览
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 分类浏览 | 按技术栈分类展示题目 | P0 |
| 搜索 | 关键词搜索题目 | P0 |
| 筛选 | 按难度、标签筛选 | P1 |
| 收藏 | 收藏感兴趣的题目 | P1 |

#### 3.3.2 题目详情
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 题目展示 | 显示题目内容、难度、标签 | P0 |
| 参考答案 | 展示标准答案和解析 | P0 |
| 相关题目 | 推荐相关题目 | P2 |
| 用户笔记 | 添加个人笔记 | P2 |

### 3.4 学习记录

| 功能 | 描述 | 优先级 |
|------|------|--------|
| 面试历史 | 查看历史面试记录和评估 | P0 |
| 做题记录 | 查看题目练习记录 | P1 |
| 错题本 | 自动收集答错的题目 | P1 |
| 能力分析 | 雷达图展示各维度能力 | P2 |

## 四、技术架构

### 4.1 技术栈

| 层级 | 技术选型 |
|------|----------|
| HTTP框架 | Hertz |
| RPC框架 | Kitex |
| IDL | Thrift |
| 数据库 | MySQL 8.0 |
| 缓存 | Redis 7.0 |
| 对象存储 | MinIO |
| AI模型 | OpenAI API / 国产大模型 |
| 认证方式 | Paseto (Platform-Agnostic Security Tokens) |
| 服务注册 | Consul |
| 配置中心 | 本地配置 / Nacos |
| 链路追踪 | OpenTelemetry |

### 4.2 项目结构

```
zpi/
├── go.mod
├── go.sum
├── docs/                # 文档
│   ├── 需求文档.md
│   └── 执行目录.md
└── server/
    ├── cmd/                       # 服务入口
    │   ├── api/                   # Hertz HTTP网关
    │   ├── user/                  # User RPC服务
    │   ├── interview/             # Interview RPC服务
    │   ├── question/              # Question RPC服务
    │   └── storage/               # Storage RPC服务
    ├── idl/                       # 接口定义
    │   ├── base/                  # 基础类型定义
    │   ├── http/                  # HTTP接口定义
    │   └── rpc/                   # RPC接口定义
    └── shared/                    # 共享代码
        ├── consts/                # 常量定义
        └── kitex_gen/             # 生成的代码
```

### 4.3 服务通信

```
用户请求 → API Gateway (Hertz HTTP)
              │
              ├── /api/user/*      → User Service (Kitex RPC)
              ├── /api/interview/* → Interview Service (Kitex RPC)
              ├── /api/question/*  → Question Service (Kitex RPC)
              └── /api/storage/*   → Storage Service (Kitex RPC)
```

## 五、数据模型

### 5.1 核心实体

```sql
-- 用户表
CREATE TABLE users (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    nickname VARCHAR(50),
    avatar_url VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 简历表
CREATE TABLE resumes (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL,
    file_url VARCHAR(500) NOT NULL,
    parsed_content JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,FOREIGN KEY (user_id) REFERENCES users(id)
);

-- 题目表
CREATE TABLE questions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    category VARCHAR(50) NOT NULL,      -- 分类：golang/java/mysql等
    difficulty TINYINT NOT NULL,         -- 难度：1简单/2中等/3困难
    title VARCHAR(500) NOT NULL,
    content TEXT NOT NULL,
    answer TEXT,
    tags JSON,                -- 标签数组
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 面试记录表
CREATE TABLE interviews (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL,
    type TINYINT NOT NULL,               -- 类型：1专项/2综合
    category VARCHAR(50),                -- 专项类型或岗位
    round TINYINT,                       -- 面试轮次（综合面试）
    status TINYINT DEFAULT 0,            -- 状态：0进行中/1已完成
    score INT,                           -- 评分
    evaluation TEXT,                     -- AI评估
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    finished_at TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- 面试对话记录表
CREATE TABLE interview_messages (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    interview_id BIGINT NOT NULL,
    role VARCHAR(20) NOT NULL,           -- interviewer/candidate
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (interview_id) REFERENCES interviews(id)
);
```

## 六、API设计

### 6.1 用户接口

| 方法 | 路径 | 描述 |
|------|------|------|
| POST | /api/v1/user/register | 用户注册 |
| POST | /api/v1/user/login | 用户登录 |
| GET | /api/v1/user/profile | 获取个人信息 |
| PUT | /api/v1/user/profile | 更新个人信息 |
| POST | /api/v1/user/resume | 上传简历 |
| GET | /api/v1/user/resume | 获取简历信息 |

### 6.2 面试接口

| 方法 | 路径 | 描述 |
|------|------|------|
| POST | /api/v1/interview/start | 开始面试 |
| POST | /api/v1/interview/answer | 提交回答 |
| POST | /api/v1/interview/finish | 结束面试 |
| GET | /api/v1/interview/history | 面试历史 |
| GET | /api/v1/interview/:id | 面试详情 |

### 6.3 题库接口

| 方法 | 路径 | 描述 |
|------|------|------|
| GET | /api/v1/question/categories | 获取分类列表 |
| GET | /api/v1/question/list | 获取题目列表 |
| GET | /api/v1/question/:id | 获取题目详情 |
| POST | /api/v1/question/favorite | 收藏题目 |

### 6.4 统一响应格式

```json
{"code": 0,
    "message": "success",
    "data": {}
}
```

错误码定义：
| 错误码 | 描述 |
|--------|------|
| 0 | 成功 |
| 10001 | 参数错误 |
| 10002 | 未登录 |
| 10003 | 权限不足 |
| 20001 | 用户不存在 |
| 20002 | 密码错误 |
| 30001 | 面试不存在 |
| 40001 | 题目不存在 |

## 七、开发计划

### Phase 1: 基础框架（1周）
- [x] 搭建项目目录结构
- [ ] 定义Thrift IDL
- [ ] 生成Kitex代码
- [ ] 搭建Hertz网关
- [ ] 实现基础中间件（日志、鉴权）

### Phase 2: 用户服务（1周）
- [ ] 实现用户注册登录
- [ ] 实现Paseto认证
- [ ] 实现个人信息管理
- [ ] 实现简历上传

### Phase 3: 题库服务（1周）
- [ ] 实现题目CRUD
- [ ] 实现分类和搜索
- [ ] 导入初始题库数据
- [ ] 实现收藏功能

### Phase 4: 面试服务（2周）
- [ ] 实现专项面试流程
- [ ] 接入AI模型
- [ ] 实现综合面试流程
- [ ] 实现评估报告生成

### Phase 5: 优化完善（1周）
- [ ] 性能优化
- [ ] 错误处理完善
- [ ] 文档完善
- [ ] 部署上线

## 八、MVP范围

**第一版本核心功能：**
1. ✅ 用户注册登录
2. ✅ 专项面试（文字模式）
3. ✅ 题库浏览
4. ✅ 面试历史记录

**后续迭代：**
- 简历解析和优化
- 综合面试
- 语音面试
- 能力分析报告
